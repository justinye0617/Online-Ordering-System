<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>商家后台</title>
</head>
<body>
<h1>餐厅商家菜单管理</h1>

<h2>添加新菜单项</h2>
<input type="number" id="productId" placeholder="商品ID">
<input type="number" id="price" placeholder="价格">
<button onclick="addItem()">添加菜品</button>

<h2>当前菜单</h2>
<div id="menu"></div>

<script>
    const userId = 1;

    async function addItem() {
        const productId = document.getElementById("productId").value;
        const price = document.getElementById("price").value;
        await fetch(`http://localhost:8089/api/menu/add?userId=${userId}&productId=${productId}&price=${price}`, {
            method: "POST"
        });
        alert("菜单项已添加");
        loadMenu();
    }

    async function removeItem(productId) {
        await fetch(`http://localhost:8089/api/menu/remove?userId=${userId}&productId=${productId}`, {
            method: "DELETE"
        });
        alert("菜单项已删除");
        loadMenu();
    }

    async function loadMenu() {
        const res = await fetch(`http://localhost:8089/api/menu/view?userId=${userId}`);
        const data = await res.json();
        const menuEl = document.getElementById("menu");
        menuEl.innerHTML = data.items.map(item => `
        <p>商品ID: ${item.productId}, 价格: ${item.price}
          <button onclick="removeItem(${item.productId})">删除</button>
        </p>
      `).join("");
    }

    loadMenu();
</script>
</body>
</html>
