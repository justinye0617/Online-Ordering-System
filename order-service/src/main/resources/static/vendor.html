<script>
    const userId = 1; // 商家ID
    const host = "http://47.88.23.191";

    async function addItem() {
        const name = document.getElementById("name").value;
        const price = document.getElementById("price").value;
        const imageUrl = document.getElementById("imageUrl").value;

        await fetch(`${host}:8089/api/menu/add?userId=${userId}&name=${encodeURIComponent(name)}&price=${price}&imageUrl=${encodeURIComponent(imageUrl)}`, {
            method: "POST"
        });
        alert("菜品添加成功！");
        loadMenu();
    }

    async function removeItem(productId) {
        await fetch(`${host}:8089/api/menu/remove?userId=${userId}&productId=${productId}`, {
            method: "DELETE"
        });
        alert("菜品已删除！");
        loadMenu();
    }

    async function loadMenu() {
        const res = await fetch(`${host}:8089/api/menu/view?userId=${userId}`);
        const data = await res.json();
        const menuEl = document.getElementById("menu");
        menuEl.innerHTML = data.items.map(item => `
        <div style="margin-bottom:10px;">
          <img src="${item.imageUrl}" width="100"><br>
          <strong>${item.name}</strong><br>
          价格: ¥${item.price}<br>
          <button onclick="removeItem(${item.id})">删除</button>
        </div>
      `).join("");
    }

    loadMenu();
</script>
